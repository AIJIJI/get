#!/bin/bash

## Shell Opts ----------------------------------------------------------------
set -exuo pipefail
IFS=$'\n\t'
tempdir=$(mktemp -d)
trap "rm -rf $tempdir" EXIT


## Main ----------------------------------------------------------------------
set +e
# Check the version of current Python3
echo `python3 --version` | grep "Python 3.6"
if [[ $? -eq 0 ]]
then
    exit 0  # Exit if version is 3.6
fi

set -e
# Install
yum groupinstall -y "Development tools"
yum install -y ncurses-devel ncurses-libs zlib-devel mysql-devel bzip2-devel \
               openssl-devel ncurses-devel  readline-devel tk-devel gdbm-devel\
               db4-devel libpcap-devel xz-devel openssl-devel wget
wget https://www.python.org/ftp/python/3.6.4/Python-3.6.4.tar.xz -O $tempdir/Python-3.6.4.tar.xz
cd $tempdir 
tar xvJf Python-3.6.4.tar.xz
cd Python-3.6.4
./configure --prefix=/usr
make
make install
